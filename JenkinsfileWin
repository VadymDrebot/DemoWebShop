#!groovy
//
// QA Complex App tests Runner

// Pipeline
pipeline {
  agent any
  //{
//    label 'master'
 // }
  options {
    timeout(time: 1, unit: 'HOURS')
    timestamps()
  } // options
  stages {
    stage('Build') {
      steps {
        script {
          bat '''
            pip install -r requirements.txt
          '''
        } // script
      } // steps
    }

    stage('Test') {
      steps {
        script {
          bat '''
            pytest -n 4
          '''
        } // script
      } // steps
    } // stage

  } // stages
  post {
    always {
      cleanWs()
    } // always
  } // post
} // pipeline

// vim: ft=groovy
// EOF
